<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="682.0" prefWidth="1016.0"
            stylesheets="@../css/cortejarFactura2Styles.css"
            xmlns="http://javafx.com/javafx/25"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.grupo2.PMSEYJ.proveedores.controller.cotejarFacturaController2">

    <children>
        <VBox spacing="15.0"
              AnchorPane.topAnchor="15"
              AnchorPane.bottomAnchor="15"
              AnchorPane.leftAnchor="15"
              AnchorPane.rightAnchor="15">

            <!-- CABECERA -->
            <VBox spacing="10" styleClass="card-container">
                <children>
                    <Label text="Cotejo de Mercancía contra Factura">
                        <font><Font size="20" name="System Bold"/></font>
                    </Label>

                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <children>
                            <Label text="Número de Factura:">
                                <font><Font size="14" name="System Bold"/></font>
                            </Label>

                            <TextField fx:id="txtNumFactura"
                                       prefWidth="250"
                                       promptText="Ej: F-001"/>

                            <Button text="BUSCAR"
                                    onAction="#buscarFactura"
                                    styleClass="btn-buscar"
                                    prefWidth="120"/>
                        </children>
                    </HBox>
                </children>
            </VBox>

            <!-- CUERPO -->
            <HBox spacing="15" VBox.vgrow="ALWAYS">

                <!-- TABLA IZQUIERDA -->
                <VBox spacing="10" styleClass="card-container" HBox.hgrow="ALWAYS">
                    <children>
                        <Label text="Detalle de Factura (Esperado)"
                               styleClass="label-titulo-esperado">
                            <font><Font size="16" name="System Bold"/></font>
                        </Label>

                        <TableView fx:id="tvFacturaOriginal" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="colProductoOrig"
                                             text="Nombre del Producto Esperado"/>

                                <TableColumn fx:id="colCantidadOrig"
                                             text="Cant. Factura"/>
                            </columns>

                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </children>
                </VBox>

                <!-- TABLA DERECHA -->
                <VBox spacing="10" styleClass="card-container" HBox.hgrow="ALWAYS">
                    <children>
                        <Label text="Mercancía Física (Recibida)"
                               styleClass="label-titulo-recibido">
                            <font><Font size="16" name="System Bold"/></font>
                        </Label>

                        <Label text="* Seleccione una fila para editar"
                               styleClass="label-hint"/>

                        <TableView fx:id="tvDetalleFactura"
                                   onMouseClicked="#seleccionarProductoParaEditar"
                                   VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="colProducto"
                                             text="Nombre del Producto Recibido"/>

                                <TableColumn fx:id="colCantidad"
                                             text="Cant. Física"/>
                            </columns>

                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>

                        <Separator/>

                        <!-- FORMULARIO -->
                        <GridPane hgap="10" vgap="10">
                            <columnConstraints>
                                <ColumnConstraints prefWidth="90"/>
                                <ColumnConstraints hgrow="ALWAYS"/>
                            </columnConstraints>

                            <children>
                                <Label text="Producto:" GridPane.halignment="RIGHT"/>
                                <TextField fx:id="txtNombre"
                                           GridPane.columnIndex="1"/>

                                <Label text="Cantidad:"
                                       GridPane.rowIndex="1"
                                       GridPane.halignment="RIGHT"/>
                                <TextField fx:id="txtCantidad"
                                           GridPane.columnIndex="1"
                                           GridPane.rowIndex="1"/>

                                <HBox spacing="10"
                                      GridPane.columnIndex="1"
                                      GridPane.rowIndex="2">
                                    <children>
                                        <Button fx:id="btnAgregarItem"
                                                text="AGREGAR"
                                                onAction="#handleAgregarProducto"
                                                styleClass="btn-agregar"
                                                HBox.hgrow="ALWAYS"/>

                                        <Button fx:id="btnCancelarEdicion"
                                                text="CANCELAR"
                                                disable="true"
                                                onAction="#cancelarEdicion"
                                                styleClass="btn-cancelar"/>
                                    </children>
                                </HBox>
                            </children>
                        </GridPane>
                    </children>
                </VBox>
            </HBox>

            <!-- PIE -->
            <HBox alignment="CENTER_RIGHT" styleClass="bottom-bar">
                <children>
                    <Button text="FINALIZAR COTEJO"
                            onAction="#handleCotejarFactura"
                            styleClass="btn-finalizar"
                            prefWidth="250"
                            prefHeight="45"/>
                </children>
            </HBox>

        </VBox>
    </children>
</AnchorPane>
